

var lines_ex = new int[][] 
{ 
    new int[] {0,9,5,9 },
    new int[] {8,0,0,8},
    new int[] {5,5,8,2},  
    new int[] {9,4,3,4},
    new int[] {2,2,2,1 },
    new int[] {7,0,7,4 },
    new int[] {6,4,2,0 },
    new int[] {0,9,2,9 },
    new int[] {3,4,1,4 },
    new int[] {0,0,8,8 },
};

var lines = new int[][]
{
        new int[] {957,596 , 957,182},
    new int[] {763,144 , 69,144},
    new int[] {761,794 , 911,944},
    new int[] {510,440 , 147,440},
    new int[] {859,33 , 859,409},
    new int[] {602,518 , 748,518},
    new int[] {980,545 , 676,241},
    new int[] {60,528 , 616,528},
    new int[] {37,242 , 37,892},
    new int[] {216,966 , 216,120},
    new int[] {372,910 , 372,307},
    new int[] {688,864 , 94,864},
    new int[] {691,17 , 167,17},
    new int[] {989,928 , 989,816},
    new int[] {207,84 , 982,84},
    new int[] {890,714 , 502,326},
    new int[] {286,329 , 686,329},
    new int[] {959,62 , 460,62},
    new int[] {840,82 , 780,82},
    new int[] {960,12 , 14,958},
    new int[] {418,45 , 983,610},
    new int[] {318,264 , 988,934},
    new int[] {458,11 , 861,11},
    new int[] {805,197 , 380,622},
    new int[] {261,907 , 261,734},
    new int[] {409,617 , 826,617},
    new int[] {285,457 , 759,931},
    new int[] {104,241 , 913,241},
    new int[] {781,141 , 781,671},
    new int[] {48,956 , 348,956},
    new int[] {921,517 , 974,517},
    new int[] {565,621 , 724,621},
    new int[] {381,276 , 381,59},
    new int[] {82,25 , 946,25},
    new int[] {978,16 , 17,977},
    new int[] {850,438 , 125,438},
    new int[] {313,850 , 313,195},
    new int[] {789,963 , 789,29},
    new int[] {110,156 , 241,156},
    new int[] {925,974 , 458,974},
    new int[] {93,153 , 696,756},
    new int[] {748,312 , 120,312},
    new int[] {566,367 , 360,367},
    new int[] {687,295 , 687,284},
    new int[] {219,925 , 180,925},
    new int[] {59,952 , 59,140},
    new int[] {641,333 , 361,53},
    new int[] {158,587 , 158,96},
    new int[] {857,278 , 857,195},
    new int[] {653,45 , 34,664},
    new int[] {639,384 , 814,384},
    new int[] {67,24 , 902,859},
    new int[] {850,278 , 850,448},
    new int[] {342,505 , 342,287},
    new int[] {504,924 , 536,956},
    new int[] {408,666 , 408,310},
    new int[] {747,347 , 747,176},
    new int[] {766,468 , 54,468},
    new int[] {283,905 , 283,421},
    new int[] {476,334 , 476,59},
    new int[] {490,935 , 753,672},
    new int[] {385,772 , 940,772},
    new int[] {907,316 , 853,370},
    new int[] {144,717 , 746,115},
    new int[] {741,819 , 230,819},
    new int[] {524,397 , 524,237},
    new int[] {411,824 , 288,824},
    new int[] {160,719 , 744,135},
    new int[] {252,550 , 440,738},
    new int[] {902,64 , 902,422},
    new int[] {392,194 , 955,757},
    new int[] {937,735 , 937,446},
    new int[] {292,49 , 985,49},
    new int[] {899,464 , 481,46},
    new int[] {304,369 , 648,369},
    new int[] {247,723 , 247,697},
    new int[] {665,941 , 185,461},
    new int[] {548,25 , 446,127},
    new int[] {663,558 , 154,558},
    new int[] {52,47 , 872,867},
    new int[] {983,68 , 983,795},
    new int[] {492,705 , 654,867},
    new int[] {82,888 , 33,888},
    new int[] {550,443 , 229,764},
    new int[] {868,508 , 375,15},
    new int[] {120,829 , 652,829},
    new int[] {787,296 , 814,296},
    new int[] {705,643 , 351,643},
    new int[] {52,23 , 558,23},
    new int[] {390,92 , 390,393},
    new int[] {713,520 , 897,520},
    new int[] {280,481 , 827,481},
    new int[] {599,181 , 599,235},
    new int[] {483,140 , 773,140},
    new int[] {571,227 , 571,779},
    new int[] {830,45 , 830,745},
    new int[] {617,745 , 449,745},
    new int[] {89,176 , 841,928},
    new int[] {358,868 , 906,320},
    new int[] {897,669 , 654,669},
    new int[] {717,729 , 123,135},
    new int[] {305,330 , 305,598},
    new int[] {220,964 , 600,964},
    new int[] {607,715 , 492,715},
    new int[] {837,561 , 820,561},
    new int[] {542,38 , 542,118},
    new int[] {390,970 , 915,445},
    new int[] {343,160 , 475,160},
    new int[] {163,60 , 972,869},
    new int[] {786,500 , 946,500},
    new int[] {401,393 , 401,910},
    new int[] {336,962 , 528,962},
    new int[] {520,489 , 520,525},
    new int[] {558,584 , 363,584},
    new int[] {786,880 , 584,678},
    new int[] {704,435 , 153,986},
    new int[] {356,522 , 235,643},
    new int[] {225,67 , 229,71},
    new int[] {389,381 , 55,47},
    new int[] {918,229 , 332,229},
    new int[] {558,989 , 558,370},
    new int[] {307,821 , 307,447},
    new int[] {13,232 , 742,961},
    new int[] {659,809 , 467,809},
    new int[] {905,942 , 456,942},
    new int[] {234,810 , 234,497},
    new int[] {421,287 , 643,65},
    new int[] {183,164 , 312,164},
    new int[] {652,955 , 977,630},
    new int[] {157,820 , 853,124},
    new int[] {278,480 , 278,384},
    new int[] {504,399 , 298,605},
    new int[] {955,76 , 798,76},
    new int[] {565,352 , 109,352},
    new int[] {912,16 , 66,862},
    new int[] {972,786 , 235,49},
    new int[] {146,15 , 146,186},
    new int[] {944,149 , 497,596},
    new int[] {485,84 , 762,84},
    new int[] {975,983 , 16,24},
    new int[] {11,896 , 887,20},
    new int[] {826,924 , 126,224},
    new int[] {246,648 , 158,736},
    new int[] {773,377 , 582,377},
    new int[] {296,947 , 378,865},
    new int[] {592,291 , 592,861},
    new int[] {331,470 , 16,470},
    new int[] {239,85 , 705,85},
    new int[] {409,842 , 409,966},
    new int[] {145,438 , 145,340},
    new int[] {239,859 , 239,409},
    new int[] {651,508 , 314,845},
    new int[] {720,39 , 176,583},
    new int[] {762,444 , 762,29},
    new int[] {983,962 , 60,39},
    new int[] {745,248 , 91,902},
    new int[] {990,18 , 990,503},
    new int[] {441,472 , 441,211},
    new int[] {524,837 , 248,561},
    new int[] {160,215 , 842,897},
    new int[] {469,544 , 989,544},
    new int[] {311,241 , 103,33},
    new int[] {887,610 , 746,610},
    new int[] {377,942 , 377,803},
    new int[] {920,401 , 823,401},
    new int[] {10,142 , 10,486},
    new int[] {850,955 , 850,578},
    new int[] {887,728 , 887,678},
    new int[] {555,749 , 84,749},
    new int[] {839,620 , 32,620},
    new int[] {432,709 , 432,183},
    new int[] {312,164 , 859,711},
    new int[] {20,119 , 739,838},
    new int[] {930,871 , 324,265},
    new int[] {41,702 , 41,520},
    new int[] {48,210 , 794,956},
    new int[] {479,526 , 479,123},
    new int[] {364,739 , 364,379},
    new int[] {920,969 , 73,122},
    new int[] {382,314 , 382,604},
    new int[] {969,877 , 129,37},
    new int[] {274,893 , 52,671},
    new int[] {696,296 , 696,221},
    new int[] {469,735 , 626,892},
    new int[] {682,435 , 682,937},
    new int[] {626,550 , 626,604},
    new int[] {898,904 , 898,755},
    new int[] {836,849 , 445,458},
    new int[] {405,237 , 405,724},
    new int[] {253,74 , 908,729},
    new int[] {837,802 , 597,802},
    new int[] {375,450 , 316,450},
    new int[] {621,784 , 314,784},
    new int[] {856,136 , 188,804},
    new int[] {983,11 , 29,965},
    new int[] {82,134 , 752,134},
    new int[] {677,299 , 573,299},
    new int[] {43,726 , 43,304},
    new int[] {886,629 , 886,603},
    new int[] {439,471 , 74,836},
    new int[] {973,879 , 122,28},
    new int[] {550,246 , 497,246},
    new int[] {49,109 , 816,876},
    new int[] {294,493 , 271,493},
    new int[] {495,397 , 495,342},
    new int[] {846,892 , 881,927},
    new int[] {267,397 , 72,592},
    new int[] {670,168 , 22,816},
    new int[] {482,302 , 482,681},
    new int[] {309,692 , 453,692},
    new int[] {597,369 , 597,589},
    new int[] {518,475 , 633,475},
    new int[] {391,484 , 493,382},
    new int[] {177,135 , 139,135},
    new int[] {458,17 , 825,17},
    new int[] {514,292 , 272,50},
    new int[] {410,734 , 142,734},
    new int[] {465,975 , 542,898},
    new int[] {32,901 , 346,587},
    new int[] {390,478 , 571,659},
    new int[] {835,839 , 189,839},
    new int[] {769,407 , 769,788},
    new int[] {974,40 , 103,911},
    new int[] {710,709 , 246,709},
    new int[] {468,857 , 343,982},
    new int[] {777,552 , 951,552},
    new int[] {23,490 , 346,490},
    new int[] {270,384 , 855,384},
    new int[] {386,454 , 166,454},
    new int[] {166,388 , 319,388},
    new int[] {698,514 , 698,180},
    new int[] {554,162 , 528,162},
    new int[] {651,363 , 879,363},
    new int[] {327,123 , 327,255},
    new int[] {439,492 , 719,212},
    new int[] {903,438 , 903,356},
    new int[] {99,611 , 99,552},
    new int[] {512,652 , 45,185},
    new int[] {565,284 , 565,180},
    new int[] {81,710 , 637,154},
    new int[] {321,769 , 164,769},
    new int[] {32,307 , 32,204},
    new int[] {310,338 , 310,914},
    new int[] {239,691 , 357,691},
    new int[] {573,164 , 559,164},
    new int[] {887,961 , 693,767},
    new int[] {362,904 , 362,944},
    new int[] {467,294 , 236,294},
    new int[] {182,53 , 182,264},
    new int[] {19,950 , 951,18},
    new int[] {191,575 , 440,824},
    new int[] {192,168 , 690,666},
    new int[] {538,552 , 891,905},
    new int[] {243,38 , 243,403},
    new int[] {417,140 , 417,818},
    new int[] {894,45 , 726,213},
    new int[] {245,898 , 245,527},
    new int[] {567,946 , 567,983},
    new int[] {572,675 , 363,675},
    new int[] {318,618 , 735,618},
    new int[] {616,580 , 981,580},
    new int[] {37,881 , 134,881},
    new int[] {624,675 , 271,322},
    new int[] {323,686 , 770,686},
    new int[] {93,385 , 626,385},
    new int[] {715,382 , 862,382},
    new int[] {170,342 , 170,84},
    new int[] {747,221 , 380,221},
    new int[] {981,311 , 981,577},
    new int[] {372,186 , 372,826},
    new int[] {961,91 , 130,922},
    new int[] {48,603 , 48,110},
    new int[] {34,975 , 935,74},
    new int[] {707,18 , 707,192},
    new int[] {261,149 , 41,369},
    new int[] {35,589 , 35,247},
    new int[] {544,522 , 437,522},
    new int[] {797,712 , 346,712},
    new int[] {622,47 , 78,591},
    new int[] {642,390 , 642,414},
    new int[] {793,29 , 69,29},
    new int[] {978,905 , 978,296},
    new int[] {212,515 , 212,920},
    new int[] {835,166 , 68,933},
    new int[] {168,742 , 168,720},
    new int[] {390,276 , 666,276},
    new int[] {507,792 , 987,792},
    new int[] {895,242 , 895,402},
    new int[] {121,950 , 943,128},
    new int[] {303,336 , 303,205},
    new int[] {293,390 , 293,736},
    new int[] {433,963 , 433,867},
    new int[] {824,327 , 620,531},
    new int[] {553,689 , 867,689},
    new int[] {226,984 , 226,284},
    new int[] {153,308 , 173,308},
    new int[] {855,959 , 345,959},
    new int[] {830,895 , 830,981},
    new int[] {557,63 , 557,205},
    new int[] {51,857 , 328,857},
    new int[] {224,243 , 224,517},
    new int[] {830,773 , 830,520},
    new int[] {607,210 , 782,385},
    new int[] {876,330 , 327,330},
    new int[] {985,11 , 18,978},
    new int[] {352,936 , 111,936},
    new int[] {900,39 , 986,39},
    new int[] {10,626 , 10,795},
    new int[] {369,942 , 11,942},
    new int[] {136,770 , 654,252},
    new int[] {209,541 , 209,557},
    new int[] {69,671 , 848,671},
    new int[] {811,451 , 194,451},
    new int[] {149,46 , 850,747},
    new int[] {704,386 , 704,953},
    new int[] {117,346 , 387,346},
    new int[] {238,701 , 688,251},
    new int[] {789,220 , 789,815},
    new int[] {967,512 , 967,213},
    new int[] {641,652 , 151,162},
    new int[] {91,942 , 312,942},
    new int[] {42,226 , 801,985},
    new int[] {166,37 , 603,37},
    new int[] {854,976 , 951,976},
    new int[] {392,23 , 772,23},
    new int[] {299,196 , 299,288},
    new int[] {514,560 , 844,890},
    new int[] {618,699 , 348,429},
    new int[] {604,947 , 604,735},
    new int[] {189,851 , 407,633},
    new int[] {907,719 , 907,449},
    new int[] {167,421 , 864,421},
    new int[] {491,383 , 538,383},
    new int[] {939,504 , 939,433},
    new int[] {78,649 , 78,975},
    new int[] {817,246 , 322,741},
    new int[] {395,195 , 205,195},
    new int[] {872,275 , 872,500},
    new int[] {196,621 , 280,621},
    new int[] {634,619 , 634,422},
    new int[] {395,30 , 395,232},
    new int[] {895,628 , 619,904},
    new int[] {58,66 , 186,194},
    new int[] {626,477 , 708,559},
    new int[] {747,712 , 747,28},
    new int[] {935,798 , 220,798},
    new int[] {459,530 , 704,530},
    new int[] {648,679 , 79,110},
    new int[] {778,135 , 778,66},
    new int[] {657,352 , 906,352},
    new int[] {499,160 , 615,160},
    new int[] {830,226 , 830,489},
    new int[] {364,971 , 826,971},
    new int[] {879,923 , 543,923},
    new int[] {914,984 , 612,984},
    new int[] {594,810 , 508,810},
    new int[] {55,467 , 269,253},
    new int[] {360,478 , 360,902},
    new int[] {176,890 , 176,431},
    new int[] {867,121 , 16,972},
    new int[] {728,876 , 65,213},
    new int[] {606,112 , 842,112},
    new int[] {563,532 , 914,532},
    new int[] {783,139 , 369,139},
    new int[] {564,359 , 846,359},
    new int[] {79,326 , 15,390},
    new int[] {972,419 , 972,35},
    new int[] {686,839 , 755,839},
    new int[] {427,856 , 77,856},
    new int[] {102,410 , 925,410},
    new int[] {468,177 , 901,610},
    new int[] {865,249 , 930,314},
    new int[] {784,447 , 863,368},
    new int[] {684,708 , 223,708},
    new int[] {555,228 , 555,900},
    new int[] {380,600 , 222,600},
    new int[] {900,408 , 188,408},
    new int[] {773,677 , 773,16},
    new int[] {560,287 , 560,790},
    new int[] {130,851 , 959,22},
    new int[] {338,951 , 626,663},
    new int[] {678,726 , 405,726},
    new int[] {243,469 , 243,276},
    new int[] {783,486 , 66,486},
    new int[] {469,536 , 469,770},
    new int[] {689,148 , 689,340},
    new int[] {396,689 , 396,673},
    new int[] {848,759 , 848,770},
    new int[] {965,775 , 965,605},
    new int[] {889,907 , 284,302},
    new int[] {161,169 , 942,950},
    new int[] {619,267 , 394,492},
    new int[] {323,786 , 18,481},
    new int[] {953,643 , 884,643},
    new int[] {371,446 , 371,252},
    new int[] {890,915 , 192,217},
    new int[] {674,259 , 674,247},
    new int[] {877,479 , 877,117},
    new int[] {620,843 , 620,734},
    new int[] {597,722 , 597,939},
    new int[] {935,663 , 935,469},
    new int[] {108,844 , 108,596},
    new int[] {211,447 , 211,482},
    new int[] {123,657 , 721,59},
    new int[] {774,858 , 774,86},
    new int[] {978,500 , 978,305},
    new int[] {152,890 , 937,105},
    new int[] {728,356 , 728,261},
    new int[] {354,373 , 433,452},
    new int[] {586,627 , 586,949},
    new int[] {764,381 , 735,410},
    new int[] {986,899 , 199,112},
    new int[] {251,418 , 251,596},
    new int[] {897,379 , 897,388},
    new int[] {149,901 , 253,901},
    new int[] {650,229 , 46,229},
    new int[] {446,707 , 446,44},
    new int[] {953,898 , 697,898},
    new int[] {772,422 , 762,432},
    new int[] {608,756 , 927,756},
    new int[] {138,911 , 716,333},
    new int[] {414,583 , 244,583},
    new int[] {219,267 , 219,751},
    new int[] {69,746 , 69,886},
    new int[] {444,243 , 493,194},
    new int[] {604,950 , 244,950},
    new int[] {450,198 , 31,617},
    new int[] {918,852 , 109,43},
    new int[] {967,800 , 267,100},
    new int[] {388,516 , 760,516},
    new int[] {656,954 , 513,954},
    new int[] {80,680 , 80,44},
    new int[] {360,848 , 360,800},
    new int[] {10,10 , 989,989},
    new int[] {889,927 , 104,142},
    new int[] {882,187 , 812,187},
    new int[] {416,522 , 356,522},
    new int[] {797,795 , 273,271},
    new int[] {175,371 , 12,371},
    new int[] {726,595 , 956,595},
    new int[] {852,355 , 852,357},
    new int[] {959,83 , 338,83},
    new int[] {822,766 , 140,84},
    new int[] {968,129 , 181,916},
    new int[] {17,28 , 975,986},
    new int[] {15,913 , 624,304},
    new int[] {589,322 , 468,443},
    new int[] {894,21 , 309,606},
    new int[] {83,25 , 963,905},
    new int[] {143,380 , 377,146},
    new int[] {587,151 , 507,151},
    new int[] {257,967 , 257,882},
    new int[] {770,552 , 770,573},
    new int[] {128,90 , 886,848},
    new int[] {456,953 , 456,669},
    new int[] {930,434 , 668,434},
    new int[] {501,835 , 796,540},
    new int[] {36,980 , 989,27},
    new int[] {494,690 , 626,690},
    new int[] {105,945 , 972,78},
    new int[] {409,730 , 409,62},
    new int[] {901,160 , 831,90},
    new int[] {881,490 , 28,490},
    new int[] {736,244 , 38,942},
    new int[] {295,770 , 199,770},
    new int[] {866,416 , 808,416},
    new int[] {875,716 , 875,189},
    new int[] {763,393 , 241,915},
    new int[] {583,237 , 704,237},
    new int[] {29,153 , 637,153},
    new int[] {767,282 , 767,107},
    new int[] {456,242 , 456,165},
    new int[] {455,232 , 749,232},
    new int[] {54,128 , 766,840},
    new int[] {901,73 , 939,73},
    new int[] {928,118 , 854,118},
    new int[] {15,983 , 975,23},
    new int[] {600,92 , 260,92},
    new int[] {247,714 , 247,490},
    new int[] {511,332 , 19,824},
    new int[] {55,15 , 968,928},
    new int[] {246,29 , 25,29},
    new int[] {22,101 , 761,840},
    new int[] {876,177 , 139,914},
    new int[] {165,150 , 822,807},
    new int[] {258,707 , 773,707},
    new int[] {68,788 , 68,875},
    new int[] {858,142 , 758,142},
    new int[] {719,642 , 810,642},
    new int[] {928,904 , 928,338},
    new int[] {287,977 , 978,286},
    new int[] {883,13 , 883,31},
    new int[] {681,301 , 681,957},
    new int[] {762,863 , 405,506},
    new int[] {194,657 , 733,118},
    new int[] {78,41 , 497,41},
    new int[] {840,627 , 840,168},
    new int[] {335,54 , 335,822},
    new int[] {136,983 , 526,593},
    new int[] {120,156 , 120,630},

};

var diagram = new int[1000,1000];

foreach (var line in lines)
{
    if (line[1] == line[3])    // horiszontal line
    {
        var a = line[0] < line[2] ? line[0] : line[2];
        var b = line[0] < line[2] ? line[2] : line[0];
        for (int i = a; i <= b; i++)
        {
            diagram[line[1], i]++;
        }
    }
    else if (line[0] == line[2]) // vertical line
    {
        var a = line[1] < line[3] ? line[1] : line[3];
        var b = line[1] < line[3] ? line[3] : line[1];
        for (int i = a; i <= b; i++)
        {
            diagram[i, line[0]]++;
        }
    }
    else // diagonal line
    {
        // only concider 45* lines
        var a = line[0];
        var b = line[2];
        var c = line[1];
        var d = line[3];
        if (a > b)
        {
            if (c > d)
            {
                if (a - b == c - d) for (int i = 0; i <= a - b; i++) diagram[d + i, b + i]++;
            }
            else
            {
                if (a - b == d - c) for (int i = 0; i <= a - b; i++) diagram[d - i, b + i]++;
            }
        }
        else
        {
            if (c > d)
            {
                if (b - a == c - d) for (int i = 0; i <= b - a; i++) diagram[d + i, b - i]++;
            }
            else
            {
                if (b - a == d - c) for (int i = 0; i <= b - a; i++) diagram[d - i, b - i]++;
            }
        }
    }
}

int numberofoverlaps = 0;
for (int i=0; i<1000; i++)
{
    for (int j=0; j<1000
        ; j++)
    {
        if (diagram[i, j] > 0)
        {
           // Console.Write(diagram[i, j]);
            if (diagram[i, j] > 1) numberofoverlaps++; 
        }
       // else Console.Write(".");
    }
  //  Console.WriteLine();
}
Console.WriteLine("Number of overlaps: " + numberofoverlaps);